<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRIPPER PEPE - The frog that ate one too many...</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            font-family: 'Permanent Marker', cursive;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
            color: #fff;
        }

        .container {
            position: fixed;
            top: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            background: rgba(0, 0, 0, 0.8);
            overflow-y: auto;
            overflow-x: hidden;
            padding-top: 2rem; /* Optional: Adds some padding at the top */
        }

        h1 {
            font-size: 5rem;
            text-align: center;
            margin-bottom: 1rem;
            margin-top: 33%; /* Add margin to the top */
            animation: colorChange 5s infinite;
        }

        .ticker {
            font-size: 2rem;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 50px;
        }

        .pepe-container {
            perspective: 1000px;
            width: 300px;
            height: 300px;
            position: relative;
            margin-bottom: 2rem;
        }

        .origin {
            max-width: 600px;
            text-align: center;
            margin-top: 2rem;
            font-size: 1.2rem;
            line-height: 1.6;
            background: rgba(0, 0, 0, 0.6);
            padding: 1rem;
            border-radius: 10px;
        }

        .ca-container {
            margin-top: 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between; /* Ensures elements are spread out */
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            max-width: 100%; /* Ensures the container doesn't exceed the screen width */
            box-sizing: border-box;
            overflow-x: hidden;
            overflow-y: hidden;
            min-height: 50px;
        }

        .ca-container::-webkit-scrollbar {
            display: none; /* Hides scrollbar */
        }

        /* Hide scrollbar for Firefox */
        .ca-container {
            scrollbar-width: none; /* Firefox specific: hides scrollbar */
        }

        /* Edge and Internet Explorer 10+ */
        .ca-container {
            -ms-overflow-style: none; /* Internet Explorer 10+ */
        }

        .ca {
            font-size: 1rem;
            word-wrap: break-word; /* Ensures the text wraps to fit the container */
            max-width: calc(100% - 100px); /* Adjusts to leave space for the button */
            overflow: hidden; /* Hides any overflow text */
            text-overflow: ellipsis; /* Adds ellipsis for overflowed text */
        }

        .copy-btn {
            background: linear-gradient(45deg, red, orange, rgb(205, 205, 26), green, blue, indigo, violet);
            background-size: 400% 400%;
            animation: gradientShift 5s ease infinite;
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 1rem;
            margin-left: 10px; /* Adds space between the text and button */
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s, transform 0.3s;
            white-space: nowrap; /* Prevents the button text from wrapping */
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .copy-btn.copied {
            transform: scale(1.1);
        }

        .social-buttons {
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.2); 
            padding: 0.5rem;
            border-radius: 10px; 
        }

        .social-icon {
            width: 50px;
            height: 50px;
            transition: transform 0.3s, filter 0.3s;
            filter: drop-shadow(2px 4px 6px black); 
            border-radius: 50%; 
            background: #fff;
            padding: 5px; 
        }

        .social-icon:hover {
            transform: scale(1.2);
            filter: brightness(1.2) drop-shadow(4px 6px 8px black); 
        }

        .psychedelic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 1;
            pointer-events: none; /* Ensures it doesn't block any interactions */
        }

        @keyframes colorChange {
            0% { color: #ff00ff; }
            25% { color: #00ffff; }
            50% { color: #ffff00; }
            75% { color: #00ff00; }
            100% { color: #ff00ff; }
        }

        #audioPlayer {
            margin-top: 2rem;
        }

        #visualizer {
            width: 100%;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            margin-top: 1rem;
        }

        .youtube-container {
            padding: 15px;
            border-radius: 10px; /* Optional: Rounds the border */
            background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet);
            background-size: 400% 400%;
            animation: gradientShift 4s ease infinite;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            min-width: 600px;
            min-height: 350px;
            height: auto;
        }

        .youtube-container iframe {
            border: 5px solid transparent;
            border-radius: 10px;
            display: block;
            width: 100%;
            height: 100%;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .ticker {
                font-size: 1.2rem;
            }

            .origin {
                font-size: 1rem;
                padding: 0.5rem;
            }

            .pepe-container {
                width: 200px;
                height: 200px;
            }

            .social-buttons {
                flex-wrap: wrap;
            }

            .social-icon {
                width: 40px;
                height: 40px;
            }

            #audioPlayer {
                width: 80%;
            }

            #visualizer {
                height: 60px;
            }

            .ca-container {
                flex-direction: column;
                align-items: flex-start; /* Align items to the start for better wrapping */
                padding: 0.5rem;
            }

            .ca {
                font-size: 0.9rem;
                max-width: 100%; /* Allows full width usage on small screens */
                margin-bottom: 0.5rem; /* Adds space between the text and button */
            }

            .copy-btn {
                width: 100%; /* Makes the button full width on small screens */
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }

            .ticker {
                font-size: 1rem;
            }

            .pepe-container {
                width: 150px;
                height: 150px;
            }

            .ca {
                font-size: 0.8rem; /* Smaller font size for very small screens */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <br><br><br><br><br><br>
        <h1>TRIPPER PEPE</h1>
        <div class="ticker">$TRIPR</div>
        <div class="pepe-container">
        </div>

        <div class="youtube-container">
            <iframe id="youtubeVideo" src="https://www.youtube.com/embed/o4nvC5QhDLs" frameborder="0" allowfullscreen></iframe>
        </div>

        <div class="origin">
            <p>The Boy's Club got a bit too wild one night out on the University of ZOGZ campus. After their normal sessions of drinking and smoking Royal OG ZOGZ kush, they decided to adventure. Andy, Brett and LandWolf slipped Pepe some Hedz style mushrooms and tabs. This led Pepe to reach his final form: TRIPPER PEPE. This is the legendary story of the frog that ate one too many (and his friends)...</p>
        </div>
        <div class="ca-container">
            <span class="ca">CA: 3r9NBq46zKp7LKYqDHyBwyA4Vj8tuNazGaaActZSUhv9</span>
            <button class="copy-btn" onclick="copyCA(this)">Copy CA</button>
        </div>
        <div class="social-buttons">
            <a href="https://x.com/tripper_pepe" target="_blank">
                <img src="assets/X.png" alt="Twitter" class="social-icon">
            </a>
            <a href="https://t.me/tripperpepe" target="_blank">
                <img src="assets/telegram.png" alt="Telegram" class="social-icon">
            </a>
            <a href="https://dexscreener.com/solana/fvpweewpjxkyaim47mqgohmazgpkahfl99ky1zmlp6na" target="_blank">
                <img src="assets/dexscreen.png" alt="Dexscreen" class="social-icon">
            </a>
        </div>
        
        <audio id="audioPlayer" controls>
            <source src="assets/music.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <canvas id="visualizer"></canvas>
    </div>
    <canvas class="psychedelic-bg" id="bgCanvas"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Kaleidoscope Background
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        function initCanvas() {
            resizeCanvas();
        }

        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', initCanvas);

        function drawKaleidoscope(time) {
            ctx.save();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.translate(canvas.width / 2, canvas.height / 2);

            for (let i = 0; i < 12; i++) {
                ctx.rotate(Math.PI * 2 / 12);
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(canvas.width, 0);

                const hue = (time / 30 + i * 30) % 360;
                ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
                ctx.lineWidth = 10;
                ctx.stroke();

                ctx.beginPath();
                ctx.arc(canvas.width / 4, 0, canvas.width / 8, 0, Math.PI * 2);
                ctx.fillStyle = `hsl(${(hue + 180) % 360}, 100%, 50%)`;
                ctx.fill();

                // Add more complex patterns
                ctx.beginPath();
                ctx.moveTo(canvas.width / 4, 0);
                ctx.lineTo(canvas.width / 2, canvas.height / 4);
                ctx.lineTo(3 * canvas.width / 4, 0);
                ctx.closePath();
                ctx.fillStyle = `hsla(${(hue + 90) % 360}, 100%, 50%, 0.5)`;
                ctx.fill();
            }

            ctx.restore();
        }

        // 3D Pepe Rotation
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, 300 / 300, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(300, 300);
        document.querySelector('.pepe-container').appendChild(renderer.domElement);

        const geometry = new THREE.PlaneGeometry(2, 2);
        const texture = new THREE.TextureLoader().load('assets/tripping-pepe.png');
        const material = new THREE.MeshBasicMaterial({ map: texture, transparent: true });
        const pepe = new THREE.Mesh(geometry, material);
        scene.add(pepe);

        camera.position.z = 2;

        let isDragging = false;
        let initialRotation = { x: 0, y: 0 };
        let previousMousePosition = { x: 0, y: 0 };

        renderer.domElement.addEventListener('mousedown', (e) => {
            if (e.button === 0) { // Only respond to left click
                isDragging = true;
                initialRotation = { x: pepe.rotation.x, y: pepe.rotation.y }; // Store initial rotation
                previousMousePosition = { x: e.clientX, y: e.clientY };
            }
        });

        renderer.domElement.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                pepe.rotation.x = initialRotation.x; // Revert to initial rotation on release
                pepe.rotation.y = initialRotation.y; // Revert to initial rotation on release
            }
        });

        renderer.domElement.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaMove = {
                    x: e.clientX - previousMousePosition.x,
                    y: e.clientY - previousMousePosition.y
                };

                pepe.rotation.y += deltaMove.x * 0.01;
                pepe.rotation.x += deltaMove.y * 0.01;

                previousMousePosition = {
                    x: e.clientX,
                    y: e.clientY
                };
            }
        });

        function animatePepe() {
            if (!isDragging) {
                pepe.rotation.y += 0.01; // Continue rotating when not dragging
                pepe.rotation.x += 0.01;
            }
            renderer.render(scene, camera);
            requestAnimationFrame(animatePepe);
        }

        animatePepe();

        // Particle System
        const particleCount = 1000;
        const particles = new THREE.BufferGeometry();
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);
        const sizes = new Float32Array(particleCount);
        const velocities = new Float32Array(particleCount * 3);
        const maxVelocity = 0.55;  // Limit for velocity
        const minVelocity = 0.01;

        for (let i = 0; i < particleCount; i++) {
            positions[i * 3] = (Math.random() - 0.5) * 10;
            positions[i * 3 + 1] = (Math.random() - 0.5) * 10;
            positions[i * 3 + 2] = (Math.random() - 0.5) * 10;

            colors[i * 3] = Math.random();
            colors[i * 3 + 1] = Math.random();
            colors[i * 3 + 2] = Math.random();

            sizes[i] = Math.random() * 5;

            velocities[i * 3] = (Math.random() - 0.5) * 0.02;
            velocities[i * 3 + 1] = (Math.random() - 0.5) * 0.02;
            velocities[i * 3 + 2] = (Math.random() - 0.5) * 0.02;
        }

        particles.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        particles.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        particles.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

        const particleMaterial = new THREE.PointsMaterial({
            vertexColors: true,
            size: 0.1,
            sizeAttenuation: true,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending
        });

        const particleSystem = new THREE.Points(particles, particleMaterial);
        scene.add(particleSystem);

        const mouse = new THREE.Vector2(0, 0);
        const mouseEffectRadius = 2.0;
        const friction = 0.98;  // Friction to slow down particles

        document.addEventListener('mousemove', (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        });

        function wrapAround(position, boundary) {
            if (position > boundary) {
                return -boundary;
            } else if (position < -boundary) {
                return boundary;
            }
            return position;
        }

        function animateParticles() {
            const positions = particles.attributes.position.array;
            const sizes = particles.attributes.size.array;
            const velocitiesArray = velocities;

            for (let i = 0; i < positions.length; i += 3) {
                const dx = positions[i] - (mouse.x * 5);
                const dy = positions[i + 1] - (mouse.y * 5);
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < mouseEffectRadius) {
                    const force = 0.001; // Lowered the force applied to particles
                    velocitiesArray[i] += force * dx / dist;
                    velocitiesArray[i + 1] += force * dy / dist;
                }

                // Update position with velocity
                positions[i] += velocitiesArray[i];
                positions[i + 1] += velocitiesArray[i + 1];
                positions[i + 2] += velocitiesArray[i + 2];

                // Apply friction
                velocitiesArray[i] *= friction;
                velocitiesArray[i + 1] *= friction;
                velocitiesArray[i + 2] *= friction;

                // Limit maximum velocity
                velocitiesArray[i] = Math.max(-maxVelocity, Math.min(maxVelocity, velocitiesArray[i]));
                velocitiesArray[i + 1] = Math.max(-maxVelocity, Math.min(maxVelocity, velocitiesArray[i + 1]));
                velocitiesArray[i + 2] = Math.max(-maxVelocity, Math.min(maxVelocity, velocitiesArray[i + 2]));

                velocitiesArray[i] = Math.max(-minVelocity, Math.max(minVelocity, velocitiesArray[i]));
                velocitiesArray[i + 1] = Math.max(-minVelocity, Math.max(minVelocity, velocitiesArray[i + 1]));
                velocitiesArray[i + 2] = Math.max(-minVelocity, Math.max(minVelocity, velocitiesArray[i + 2]));

                // Update particle sizes dynamically
                sizes[i / 3] = (Math.sin(i / 10 + performance.now() / 1000) + 1.5) * 2.5;

                // Wrap around logic
                positions[i] = wrapAround(positions[i], 5);
                positions[i + 1] = wrapAround(positions[i + 1], 5);
                positions[i + 2] = wrapAround(positions[i + 2], 5);
            }

            particles.attributes.position.needsUpdate = true;
            particles.attributes.size.needsUpdate = true;
        }

        // Audio Visualization
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const audioElement = document.getElementById('audioPlayer');
        const audioSrc = audioContext.createMediaElementSource(audioElement);
        const analyser = audioContext.createAnalyser();

        audioSrc.connect(analyser);
        analyser.connect(audioContext.destination);

        analyser.fftSize = 256;
        const bufferLength = analyser.frequencyBinCount;
        const dataArray = new Uint8Array(bufferLength);

        const visualizer = document.getElementById('visualizer');
        const visualizerCtx = visualizer.getContext('2d');

        function drawVisualizer() {
            const WIDTH = visualizer.width;
            const HEIGHT = visualizer.height;

            requestAnimationFrame(drawVisualizer);

            analyser.getByteFrequencyData(dataArray);

            visualizerCtx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            visualizerCtx.fillRect(0, 0, WIDTH, HEIGHT);

            const barWidth = (WIDTH / bufferLength) * 2.5;
            let barHeight;
            let x = 0;

            for (let i = 0; i < bufferLength; i++) {
                barHeight = dataArray[i] / 2;

                visualizerCtx.fillStyle = `hsl(${i * 360 / bufferLength}, 100%, 50%)`;
                visualizerCtx.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);

                x += barWidth + 1;
            }
        }

        function animate(time) {
            drawKaleidoscope(time);
            animateParticles();
            requestAnimationFrame(animate);
        }

        animate(0);
        animatePepe();
        drawVisualizer();

        function copyCA(button) {
            const ca = "3r9NBq46zKp7LKYqDHyBwyA4Vj8tuNazGaaActZSUhv9";
            navigator.clipboard.writeText(ca).then(() => {
                button.innerText = "✔ Copied";
                button.classList.add('copied');
                setTimeout(() => {
                    button.innerText = "Copy CA";
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        // Start audio context on user interaction
        document.body.addEventListener('click', () => {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
                audioElement.play();
            }
        });

        // Resize event listener
        window.addEventListener('resize', () => {
            resizeCanvas();
            camera.aspect = 300 / 300;
            camera.updateProjectionMatrix();
            renderer.setSize(300, 300);
        });

        // Initialize visualizer size
        visualizer.width = visualizer.clientWidth;
        visualizer.height = visualizer.clientHeight;

        function updatePepeSize() {
            const container = document.querySelector('.pepe-container');
            const width = container.clientWidth;
            const height = container.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        }

        window.addEventListener('resize', updatePepeSize);
                updatePepeSize();

                function resizeVisualizer() {
            const visualizer = document.getElementById('visualizer');
            visualizer.width = visualizer.clientWidth;
            visualizer.height = visualizer.clientHeight;
        }

        // Replace the existing YouTube iframe event listener with this updated version
        const youtubeIframe = document.getElementById('youtubeVideo');
        const audioPlayer = document.getElementById('audioPlayer');
        
        youtubeIframe.addEventListener('click', () => {
            if (!audioPlayer.paused) {
                audioPlayer.pause();
            }
        });

        // Ensure the video is properly stopped when navigating
        window.addEventListener('beforeunload', () => {
            audioPlayer.pause();
        });

        // Add logic to stop the audio player if YouTube video is played
        youtubeIframe.addEventListener('load', () => {
            // Create a new YouTube player object
            const player = new YT.Player('youtubeVideo', {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });

            function onPlayerStateChange(event) {
                if (event.data == YT.PlayerState.PLAYING) {
                    audioPlayer.pause();
                }
            }
        });

        document.getElementById('youtubeVideo').addEventListener('mouseenter', () => {
            if (!audioPlayer.paused) {
                audioPlayer.pause();
            }
        });

        document.getElementById('youtubeVideo').addEventListener('mouseleave', () => {
            if (audioPlayer.paused) {
                audioPlayer.play();
            }
        });

        window.addEventListener('resize', resizeVisualizer);
        resizeVisualizer();

    </script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>